<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resize Image Pixel Online</title>

<style>
:root{
  --blue:#4f5fbf;
  --light:#f7f8ff;
}
body{
  font-family: Arial, sans-serif;
  background: var(--light);
  margin:0;
}
header{
  background: var(--blue);
  height:12px;
}
.container{
  max-width:700px;
  margin:40px auto;
  background:#fff;
  padding:30px;
  border-radius:8px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
  text-align:center;
}
h1{margin-bottom:25px}

.drop-area{
  border:2px dashed #9aa5e6;
  padding:30px;
  border-radius:8px;
  margin-bottom:20px;
}
.drop-area p{margin:0 0 15px;color:#555}
.drop-area button{
  background:#0a7f6d;
  color:#fff;
  border:none;
  padding:10px 25px;
  border-radius:5px;
  cursor:pointer;
}
input[type=file]{display:none}

.controls{margin:15px 0}
input[type=number]{
  width:120px;
  padding:8px;
  margin:5px;
}
label{margin:8px;display:inline-block}

button#resizeBtn{
  margin-top:20px;
  background:var(--blue);
  color:#fff;
  border:none;
  padding:12px 30px;
  font-size:16px;
  border-radius:5px;
  cursor:pointer;
}

.preview img{
  max-width:220px;
  border-radius:6px;
  margin:10px auto;
  display:block;
}
.size-badge span{
  background:#4f5fbf;
  color:#fff;
  padding:4px 8px;
  border-radius:4px;
  margin:3px;
  display:inline-block;
}

.note{margin-top:20px;font-weight:bold}

@media(max-width:600px){
  input[type=number]{width:100px}
}
</style>
</head>

<body>
<header></header>

<div class="container">
<h1>Resize Image Pixel Online</h1>

<div class="drop-area" id="dropArea">
  <p>Select Or Drag & Drop Images Here</p>
  <button onclick="fileInput.click()">Select Images</button>
  <input type="file" id="fileInput" accept="image/*">
</div>

<div class="preview" id="preview"></div>

<div class="controls">
  <label>
    <input type="checkbox" id="aspect"> Maintain Aspect Ratio
  </label>
</div>

<div class="controls">
  <input type="number" id="width" placeholder="Width (PX)">
  Ã—
  <input type="number" id="height" placeholder="Height (PX)">
</div>

<div class="controls">
  <label>
    <input type="checkbox" id="compress">
    Compress Image To Specific Size
  </label>
</div>

<div class="controls">
  Output:
  <label><input type="radio" name="format" value="image/jpeg" checked> JPEG</label>
  <label><input type="radio" name="format" value="image/png"> PNG</label>
  <label><input type="radio" name="format" value="image/webp"> WEBP</label>
</div>

<button id="resizeBtn">Resize Image</button>

<div class="note">Note:- You can resize 10 images at once.</div>
</div>

<script>
const fileInput = document.getElementById("fileInput");
const dropArea = document.getElementById("dropArea");
const preview = document.getElementById("preview");
const widthInput = document.getElementById("width");
const heightInput = document.getElementById("height");
const aspect = document.getElementById("aspect");

/* ===== Drag & Drop ===== */
dropArea.addEventListener("dragover", e=>{
  e.preventDefault();
  dropArea.style.background="#eef1ff";
});
dropArea.addEventListener("dragleave", ()=>{
  dropArea.style.background="";
});
dropArea.addEventListener("drop", e=>{
  e.preventDefault();
  dropArea.style.background="";
  fileInput.files = e.dataTransfer.files;
  showPreview();
});

/* ===== Preview on Upload (Pi7 Style) ===== */
fileInput.addEventListener("change", showPreview);

function showPreview(){
  preview.innerHTML="";
  const file = fileInput.files[0];
  if(!file) return;

  const img = new Image();
  img.onload = ()=>{
    widthInput.value = img.width;
    heightInput.value = img.height;

    preview.appendChild(img);

    const badge = document.createElement("div");
    badge.className="size-badge";
    badge.innerHTML = `
      <span>W-${img.width}px</span>
      <span>H-${img.height}px</span>
    `;
    preview.appendChild(badge);
  };
  img.src = URL.createObjectURL(file);
}

/* ===== Resize ===== */
document.getElementById("resizeBtn").onclick = ()=>{
  if(!fileInput.files.length) return alert("Select image first");

  const img = new Image();
  img.onload = ()=>{
    let w = +widthInput.value || img.width;
    let h = +heightInput.value || img.height;

    if(aspect.checked){
      h = img.height * (w / img.width);
    }

    const canvas = document.createElement("canvas");
    canvas.width = w;
    canvas.height = h;
    const ctx = canvas.getContext("2d");
    ctx.drawImage(img,0,0,w,h);

    const format = document.querySelector("input[name=format]:checked").value;
    const quality = document.getElementById("compress").checked ? 0.7 : 0.92;
    const url = canvas.toDataURL(format, quality);

    preview.innerHTML = `
      <img src="${url}">
      <a href="${url}" download="resized-image"
         style="display:block;margin-top:10px;color:#4f5fbf;font-weight:bold">
         Download Image
      </a>
    `;
  };
  img.src = URL.createObjectURL(fileInput.files[0]);
};
</script>
</body>
</html>
