<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resize Image Pixel Online</title>

<style>
:root{
  --blue:#4f5fbf;
  --light:#f7f8ff;
}
body{font-family:Arial;background:var(--light);margin:0}
header{background:var(--blue);height:12px}
.container{
  max-width:720px;margin:40px auto;background:#fff;
  padding:30px;border-radius:8px;text-align:center;
  box-shadow:0 8px 20px rgba(0,0,0,.08)
}
.drop-area{
  border:2px dashed #9aa5e6;padding:30px;border-radius:8px
}
.drop-area button{
  background:#0a7f6d;color:#fff;border:none;
  padding:10px 25px;border-radius:5px
}
input[type=file]{display:none}
input[type=number],input[type=text]{
  padding:8px;width:130px;margin:5px
}
.preview img{
  max-width:200px;border-radius:6px;margin:10px auto;display:block
}
.badge span{
  background:#4f5fbf;color:#fff;padding:4px 8px;
  border-radius:4px;margin:3px;display:inline-block
}
.final-card{
  border:2px dashed #9aa5e6;
  padding:25px;border-radius:8px;margin-top:20px
}
button{
  background:var(--blue);color:#fff;border:none;
  padding:12px 30px;border-radius:5px;cursor:pointer
}
</style>
</head>

<body>
<header></header>

<div class="container">
<h2>Resize Image Pixel Online</h2>

<div class="drop-area">
  <p>Select Image</p>
  <button onclick="fileInput.click()">Select Image</button>
  <input type="file" id="fileInput" accept="image/*">
</div>

<div class="preview" id="preview"></div>

<div>
  <input type="number" id="width" placeholder="Width (PX)">
  Ã—
  <input type="number" id="height" placeholder="Height (PX)">
</div>

<div>
  <label><input type="checkbox" id="aspect"> Maintain Aspect Ratio</label>
</div>

<div>
  Output:
  <label><input type="radio" name="format" value="image/jpeg" checked> JPEG</label>
  <label><input type="radio" name="format" value="image/png"> PNG</label>
  <label><input type="radio" name="format" value="image/webp"> WEBP</label>
</div>

<button onclick="generateFinal()">Resize Image</button>

<div id="finalResult"></div>
</div>

<script>
const fileInput = document.getElementById("fileInput");
const preview = document.getElementById("preview");
const widthInput = document.getElementById("width");
const heightInput = document.getElementById("height");
const aspect = document.getElementById("aspect");
const finalResult = document.getElementById("finalResult");

let originalImg = new Image();
let originalName = "image";

fileInput.onchange = () => {
  const file = fileInput.files[0];
  if(!file) return;

  originalName = file.name.split(".")[0];

  originalImg = new Image();
  originalImg.onload = () => {
    widthInput.value = originalImg.width;
    heightInput.value = originalImg.height;
    updatePreview();
  };
  originalImg.src = URL.createObjectURL(file);
};

widthInput.oninput = updatePreview;
heightInput.oninput = updatePreview;
aspect.onchange = updatePreview;

function updatePreview(){
  if(!originalImg.src) return;

  let w = +widthInput.value || originalImg.width;
  let h = +heightInput.value || originalImg.height;

  if(aspect.checked){
    h = originalImg.height * (w / originalImg.width);
    heightInput.value = Math.round(h);
  }

  const canvas = document.createElement("canvas");
  canvas.width = w;
  canvas.height = h;
  canvas.getContext("2d").drawImage(originalImg,0,0,w,h);

  preview.innerHTML = `
    <img src="${canvas.toDataURL()}">
    <div class="badge">
      <span>W-${w}px</span>
      <span>H-${h}px</span>
    </div>
  `;
}

function generateFinal(){
  const canvas = document.createElement("canvas");
  canvas.width = widthInput.value;
  canvas.height = heightInput.value;
  canvas.getContext("2d").drawImage(
    originalImg,0,0,canvas.width,canvas.height
  );

  const format = document.querySelector("input[name=format]:checked").value;

  canvas.toBlob(blob=>{
    const sizeKB = (blob.size / 1024).toFixed(1);
    const url = URL.createObjectURL(blob);

    finalResult.innerHTML = `
      <div class="final-card">
        <img src="${url}" style="max-width:80px"><br>
        <strong>${originalName}.${format.split("/")[1]}</strong><br>
        Size: ${sizeKB} KB<br><br>

        Rename Image<br>
        <input type="text" id="rename" value="${originalName}"><br><br>

        <button onclick="downloadFinal('${url}','${format}')">Download</button>
      </div>
    `;
  }, format, 0.92);
}

function downloadFinal(url, format){
  const name =
    document.getElementById("rename").value || "image";
  const a = document.createElement("a");
  a.href = url;
  a.download = name + "." + format.split("/")[1];
  a.click();
}
</script>
</body>
</html>
